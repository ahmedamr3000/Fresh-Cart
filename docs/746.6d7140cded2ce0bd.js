"use strict";(self.webpackChunkproj=self.webpackChunkproj||[]).push([[746],{5746:(g,l,s)=>{s.r(l),s.d(l,{ProductsComponent:()=>T});var _=s(6814),m=s(2836),p=s(6261),d=s(6472),t=s(5879),v=s(3516),n=s(8936),c=s(2425),P=s(6968);function C(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"i",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw();return t.KtG(o.addwishlist(r._id))}),t.qZA()}}function f(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"i",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw();return t.KtG(o.removewishlist(r._id))}),t.qZA()}}const x=function(a){return["/details",a]};function E(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6),t._UZ(3,"img",7),t.TgZ(4,"h3",8),t._uU(5),t.qZA(),t.TgZ(6,"h4",9),t._uU(7),t.qZA(),t.TgZ(8,"div",10)(9,"span"),t._uU(10),t.qZA(),t.TgZ(11,"div"),t._UZ(12,"i",11),t.TgZ(13,"span",12),t._uU(14),t.qZA()()()(),t.YNc(15,C,1,0,"i",13),t.YNc(16,f,1,0,"i",14),t.TgZ(17,"button",15),t.NdJ("click",function(){const o=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.addCart(o._id))}),t._uU(18," Add To Cart "),t.qZA()()()}if(2&a){const e=u.$implicit,i=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(9,x,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title),t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.hij(" ",e.title.split(" ").slice(0,2).join(" ")," "),t.xp6(3),t.hij("",e.price," EGP"),t.xp6(4),t.Oqu(e.ratingsAverage),t.xp6(1),t.Q6J("ngIf",!i.wish.includes(e._id)),t.xp6(1),t.Q6J("ngIf",i.wish.includes(e._id))}}const O=function(a,u,e){return{id:"232323",itemsPerPage:a,currentPage:u,totalItems:e}};let T=(()=>{class a{constructor(e,i,r,o){this._HomeServeService=e,this._CartService=i,this.toster=r,this._WishlistService=o,this.searchTerm="",this.products=[],this.categeries=[],this.wish=[],this.itemsPerPage=0,this.currentPage=1,this.totalItems=0}addCart(e){this._CartService.addtocart(e).subscribe({next:i=>{this.toster.success(i.message,"",{timeOut:2500,closeButton:!0,progressBar:!0}),this._CartService.cartitems.next(i.numOfCartItems)}})}addwishlist(e){this._WishlistService.addwishlist(e).subscribe({next:i=>{this.toster.success(i.message,"",{timeOut:2500,closeButton:!0,progressBar:!0}),this._WishlistService.wishitems.next(i.data.length),this.wish=i.data}})}ngOnInit(){this._HomeServeService.getAllProduct().subscribe({next:e=>{this.products=e.data,this.currentPage=e.metadata.currentPage,this.itemsPerPage=e.metadata.limit,this.totalItems=e.results}}),this._HomeServeService.getCategoris().subscribe({next:e=>{this.categeries=e.data}}),this._WishlistService.getwishlist().subscribe({next:e=>{const i=e.data.map(r=>r._id);this.wish=i}})}pageChanged(e){this._HomeServeService.getAllProduct(e).subscribe({next:i=>{this.products=i.data,this.currentPage=i.metadata.currentPage,this.itemsPerPage=i.metadata.limit,this.totalItems=i.results}})}removewishlist(e){this._WishlistService.removeItem(e).subscribe({next:i=>{this._WishlistService.wishitems.next(i.data.length),this.wish=i.data,this.toster.success(i.message,"",{timeOut:2500,closeButton:!0,progressBar:!0})}})}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(v.F),t.Y36(n.N),t.Y36(c._W),t.Y36(P.M))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:8,vars:19,consts:[[1,"row","g-4"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-4"],["id","232323","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-md-3"],[1,"product","shadow","p-2"],[1,"cursor-pointer",3,"routerLink"],[1,"w-100","position-relative",3,"src","alt"],[1,"h6","text-main"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],["class","fa-regular fa-heart ani",3,"click",4,"ngIf"],["class","fa-solid fa-heart ani text-danger",3,"click",4,"ngIf"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","fa-heart","ani",3,"click"],[1,"fa-solid","fa-heart","ani","text-danger",3,"click"]],template:function(i,r){1&i&&(t.TgZ(0,"section")(1,"div",0),t.YNc(2,E,19,11,"div",1),t.ALo(3,"search"),t.ALo(4,"paginate"),t.ALo(5,"slice"),t.qZA(),t.TgZ(6,"div",2)(7,"pagination-controls",3),t.NdJ("pageChange",function(h){return r.pageChanged(h)})("pageBoundsCorrection",function(h){return r.pageChanged(h)}),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("ngForOf",t.xi3(3,5,t.xi3(4,8,t.Dn7(5,11,r.products,0,12),t.kEZ(15,O,r.itemsPerPage,r.currentPage,r.totalItems)),r.searchTerm)),t.xp6(5),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0))},dependencies:[_.ez,_.sg,_.O5,_.OU,m.p,p.rH,d.JX,d._s,d.LS]})}return a})()},8936:(g,l,s)=>{s.d(l,{N:()=>d});var _=s(5619),m=s(5879),p=s(9862);let d=(()=>{class t{constructor(n){this._HttpClient=n,this.headers={token:localStorage.getItem("etoken")},this.cartitems=new _.X(0)}addtocart(n){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:n},{headers:this.headers})}getusercart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.headers})}removeItem(n){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${n}`,{headers:this.headers})}updateitems(n,c){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${n}`,{count:c},{headers:this.headers})}senddata(n,c){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${c}?url=http://localhost:4200`,{shippingAddress:n},{headers:this.headers})}clear(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.headers})}static#t=this.\u0275fac=function(c){return new(c||t)(m.LFG(p.eN))};static#e=this.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);