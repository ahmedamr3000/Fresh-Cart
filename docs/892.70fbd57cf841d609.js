"use strict";(self.webpackChunkproj=self.webpackChunkproj||[]).push([[892],{6892:(g,l,r)=>{r.r(l),r.d(l,{CategoryProductsComponent:()=>x});var h=r(6814),d=r(6261),t=r(5879),u=r(6461),o=r(8936),v=r(2425),i=r(6968);function n(c,m){if(1&c){const s=t.EpF();t.TgZ(0,"i",17),t.NdJ("click",function(){t.CHM(s);const a=t.oxw().$implicit,_=t.oxw();return t.KtG(_.addToWish(a._id))}),t.qZA()}}function C(c,m){if(1&c){const s=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(s);const a=t.oxw().$implicit,_=t.oxw();return t.KtG(_.deletefromWish(a._id))}),t.qZA()}}const f=function(c){return["/details",c]};function E(c,m){if(1&c){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7),t._UZ(3,"img",8),t.TgZ(4,"h3",9),t._uU(5),t.qZA(),t.TgZ(6,"h4",10),t._uU(7),t.qZA(),t.TgZ(8,"div",11)(9,"span"),t._uU(10),t.qZA(),t.TgZ(11,"div"),t._UZ(12,"i",12),t.TgZ(13,"span",13),t._uU(14),t.qZA()()()(),t.YNc(15,n,1,0,"i",14),t.YNc(16,C,1,0,"i",15),t.TgZ(17,"button",16),t.NdJ("click",function(){const _=t.CHM(s).$implicit,p=t.oxw();return t.KtG(p.addToCart(_._id))}),t._uU(18," Add To Cart "),t.qZA()()()}if(2&c){const s=m.$implicit,e=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(9,f,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title),t.xp6(2),t.Oqu(s.category.name),t.xp6(2),t.hij(" ",s.title.split(" ").slice(0,2).join(" ")," "),t.xp6(3),t.hij("",s.price," EGP"),t.xp6(4),t.Oqu(s.ratingsAverage),t.xp6(1),t.Q6J("ngIf",!e.wish.includes(s._id)),t.xp6(1),t.Q6J("ngIf",e.wish.includes(s._id))}}let x=(()=>{class c{constructor(s,e,a,_,p){this._CatService=s,this._CartService=e,this._ToastrService=a,this._WishListService=_,this._ActivatedRoute=p,this.products=[],this.wish=[]}ngOnInit(){let s="";this._ActivatedRoute.paramMap.subscribe({next:e=>{s=e.get("id")||"",console.log(s)}}),this._CatService.getProductsByCat("category",s).subscribe({next:e=>{this.products=e.data,this.catname=e.data,console.log(this.catname)},error:e=>{console.log(e)}}),this._WishListService.getwishlist().subscribe({next:e=>{const a=e.data.map(_=>_._id);this.wish=a},error:e=>{console.log(e)}})}addToCart(s){this._CartService.addtocart(s).subscribe({next:e=>{this._CartService.cartitems.next(e.numOfCartItems),console.log(e),this._ToastrService.success(e.message,"",{timeOut:2500,closeButton:!0,progressBar:!0})},error:e=>{console.log(e)}})}addToWish(s){this._WishListService.addwishlist(s).subscribe({next:e=>{console.log(e),this.wish=e.data,this._WishListService.wishitems.next(e.data.length),this._ToastrService.success(e.message,"",{timeOut:2500,closeButton:!0,progressBar:!0})}})}deletefromWish(s){this._WishListService.removeItem(s).subscribe({next:e=>{console.log(e),this.wish=e.data,this._WishListService.wishitems.next(e.data.length),this._ToastrService.error(e.message,"",{timeOut:2500,closeButton:!0,progressBar:!0})},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(e){return new(e||c)(t.Y36(u.q),t.Y36(o.N),t.Y36(v._W),t.Y36(i.M),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-category-products"]],standalone:!0,features:[t.jDz],decls:5,vars:1,consts:[[1,"my-4"],[1,"row","g-4"],[1,"text-center"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-4"],[1,"col-md-3"],[1,"product","shadow","p-2"],[1,"cursor-pointer",3,"routerLink"],[1,"w-100","position-relative",3,"src","alt"],[1,"h6","text-main"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],["class","fa-regular fa-heart ani",3,"click",4,"ngIf"],["class","fa-solid fa-heart ani text-danger",3,"click",4,"ngIf"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","fa-heart","ani",3,"click"],[1,"fa-solid","fa-heart","ani","text-danger",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1),t._UZ(2,"h2",2),t.YNc(3,E,19,11,"div",3),t.qZA(),t._UZ(4,"div",4),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",a.products))},dependencies:[h.ez,h.sg,h.O5,d.rH]})}return c})()},8936:(g,l,r)=>{r.d(l,{N:()=>u});var h=r(5619),d=r(5879),t=r(9862);let u=(()=>{class o{constructor(i){this._HttpClient=i,this.headers={token:localStorage.getItem("etoken")},this.cartitems=new h.X(0)}addtocart(i){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:i},{headers:this.headers})}getusercart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.headers})}removeItem(i){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${i}`,{headers:this.headers})}updateitems(i,n){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${i}`,{count:n},{headers:this.headers})}senddata(i,n){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddress:i},{headers:this.headers})}clear(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.headers})}static#t=this.\u0275fac=function(n){return new(n||o)(d.LFG(t.eN))};static#e=this.\u0275prov=d.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},6968:(g,l,r)=>{r.d(l,{M:()=>u});var h=r(5619),d=r(5879),t=r(9862);let u=(()=>{class o{constructor(i){this._HttpClient=i,this.headers={token:localStorage.getItem("etoken")},this.wishitems=new h.X(0)}addwishlist(i){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/wishlist",{productId:i},{headers:this.headers})}getwishlist(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/wishlist",{headers:this.headers})}removeItem(i){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/wishlist/${i}`,{headers:this.headers})}static#t=this.\u0275fac=function(n){return new(n||o)(d.LFG(t.eN))};static#e=this.\u0275prov=d.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()}}]);