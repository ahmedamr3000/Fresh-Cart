"use strict";(self.webpackChunkproj=self.webpackChunkproj||[]).push([[237],{2237:(C,l,c)=>{c.r(l),c.d(l,{CartComponent:()=>v});var m=c(6814),p=c(6261),t=c(5879),d=c(8936);function a(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"img",13),t.qZA(),t.TgZ(3,"div",14)(4,"div",15)(5,"div")(6,"h3",16),t._uU(7),t.qZA(),t.TgZ(8,"p",17),t._uU(9),t.qZA(),t.TgZ(10,"button",18),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.removeCartItem(i.product._id))}),t._UZ(11,"i",19),t._uU(12," Remove "),t.qZA()(),t.TgZ(13,"div")(14,"button",20),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.changeCount(i.product._id,i.count+1))}),t._uU(15," + "),t.qZA(),t.TgZ(16,"span",21),t._uU(17),t.qZA(),t.TgZ(18,"button",20),t.NdJ("click",function(){const i=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.changeCount(i.product._id,i.count-1))}),t._uU(19," - "),t.qZA()()()()()}if(2&n){const e=h.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH),t.xp6(5),t.Oqu(e.product.title),t.xp6(2),t.hij("Price : ",e.price," EGP"),t.xp6(8),t.Oqu(e.count)}}const g=function(n){return["/checkout",n]};function s(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h3",4),t._uU(3,"Cart Shop"),t.qZA(),t.TgZ(4,"div",5)(5,"p",4),t._uU(6," Totel Price : "),t.TgZ(7,"span",6),t._uU(8),t.qZA()(),t.TgZ(9,"p",4),t._uU(10," total number of items : "),t.TgZ(11,"span",6),t._uU(12),t.qZA()()(),t.YNc(13,a,20,4,"div",7),t.TgZ(14,"div",5)(15,"button",8),t._uU(16," onlinePayment "),t._UZ(17,"img",9),t.qZA(),t.TgZ(18,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clear())}),t._uU(19,"Clear Your Cart"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(8),t.hij("",e.cartDetails.totalCartPrice," EGP"),t.xp6(4),t.Oqu(e.numOfCartItems),t.xp6(1),t.Q6J("ngForOf",e.cartDetails.products),t.xp6(2),t.Q6J("routerLink",t.VKq(4,g,e.cartDetails._id))}}function _(n,h){1&n&&(t.TgZ(0,"h2",22),t._uU(1,"Your Cart Is Empty..."),t.qZA())}let v=(()=>{class n{constructor(e){this._CartService=e,this.cartDetails=null}changeCount(e,r){r>0&&this._CartService.updateitems(e,r).subscribe({next:o=>{this.cartDetails=o.data}})}removeCartItem(e){this._CartService.removeItem(e).subscribe({next:r=>{this.cartDetails=r.data,this.numOfCartItems=r.numOfCartItems,this._CartService.cartitems.next(r.numOfCartItems)}})}ngOnInit(){this._CartService.getusercart().subscribe({next:e=>{this.numOfCartItems=e.numOfCartItems,this.cartDetails=e.data,console.log(e)}})}clear(){this._CartService.clear().subscribe({next:e=>{"success"===e.message&&(this.cartDetails=null,this._CartService.cartitems.next(0))}})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(d.N))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-5 py-5",4,"ngIf","ngIfElse"],["msg",""],[1,"my-5","py-5"],[1,"container","my-5","py-5","p-5","bg-main-light","rounded-3"],[1,"fw-bold"],[1,"d-flex","justify-content-between"],[1,"text-main"],["class","row border-bottom py-3 align-items-center fw-bold",4,"ngFor","ngForOf"],[1,"btn-main","mt-3",3,"routerLink"],["src","./assets/visa-1.svg","alt","visa"],[1,"btn-main","mt-3",3,"click"],[1,"row","border-bottom","py-3","align-items-center","fw-bold"],[1,"col-md-2","mb-2"],["alt","",1,"w-100",3,"src"],[1,"col-md-10"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h5"],[1,"text-main","m-0"],[1,"btn","p-0","m-0","text-danger",3,"click"],[1,"fa-regular","fa-trash-can","text-danger"],[1,"btn","btn-outline-success",3,"click"],[1,"mx-2"],[1,"text-center","py-5","my-5"]],template:function(r,o){if(1&r&&(t.YNc(0,s,20,6,"section",0),t.YNc(1,_,2,0,"ng-template",null,1,t.W1O)),2&r){const i=t.MAs(2);t.Q6J("ngIf",o.cartDetails)("ngIfElse",i)}},dependencies:[m.ez,m.sg,m.O5,p.rH]})}return n})()},8936:(C,l,c)=>{c.d(l,{N:()=>d});var m=c(5619),p=c(5879),t=c(9862);let d=(()=>{class a{constructor(s){this._HttpClient=s,this.headers={token:localStorage.getItem("etoken")},this.cartitems=new m.X(0)}addtocart(s){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:s},{headers:this.headers})}getusercart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.headers})}removeItem(s){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${s}`,{headers:this.headers})}updateitems(s,_){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${s}`,{count:_},{headers:this.headers})}senddata(s,_){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${_}?url=http://localhost:4200`,{shippingAddress:s},{headers:this.headers})}clear(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:this.headers})}static#t=this.\u0275fac=function(_){return new(_||a)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);